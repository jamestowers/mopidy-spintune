// Generated by CoffeeScript 1.7.1
(function() {
  this.Playlist = (function() {
    function Playlist() {
      console.log('[Playlist] init');
      this.selectedTrack = 0;
      this.trackCount = 0;
    }

    Playlist.prototype.set = function(clickedTrack) {
      var i;
      this.clear();
      $('.song').each((function(_this) {
        return function(i, el) {
          if (el.href === clickedTrack) {
            _this.selectedTrack = _this.trackCount;
          }
          player.mopidy.tracklist.add([null, null, el.href]);
          return _this.trackCount++;
        };
      })(this));
      i = 0;
      player.stop();
      while (i <= this.selectedTrack) {
        player.next();
        i++;
      }
      return player.play();
    };

    Playlist.prototype.clear = function() {
      player.mopidy.tracklist.clear();
      return this.trackCount = 0;
    };

    Playlist.prototype.get = function() {
      return player.mopidy.tracklist.getTracks().then(this.processCurrentPlaylist, console.error);
    };

    return Playlist;

  })();

}).call(this);
